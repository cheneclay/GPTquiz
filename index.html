<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Find Your ChatGPT BFF</title>
<style>
  :root { --max: 860px; }
  body { font-family: system-ui,-apple-system,Segoe UI,Roboto,Inter,Arial,sans-serif; margin:0; background:#f7f7fb; color:#111; }
  header { background:#111; color:#fff; padding:48px 20px; text-align:center; }
  header h1 { margin:0 0 8px; font-size:clamp(28px,4vw,40px); }
  header p { margin:0; opacity:.85 }
  .wrap { max-width:var(--max); margin:24px auto 80px; padding:0 16px; }
  .card { background:#fff; border-radius:14px; box-shadow:0 6px 24px rgba(0,0,0,.06); padding:22px; margin:16px 0; }
  .q { font-weight:700; margin-bottom:12px; }
  .opts label { display:block; padding:10px 12px; border:1px solid #e6e6ef; border-radius:10px; margin:8px 0; cursor:pointer; transition:.15s; }
  .opts input { margin-right:8px; }
  .opts label:hover { border-color:#c3c3d9; background:#fafaff; }
  .actions { display:flex; gap:12px; flex-wrap:wrap; margin-top:16px; }
  button { cursor:pointer; border:0; padding:14px 18px; border-radius:12px; font-weight:700; }
  #seeResults { background:#3b5bff; color:#fff; }
  #reset { background:#e9ecff; color:#1b1f3b; }
  .result { display:none; }
  .result.show { display:block; }
  .grid { display:grid; grid-template-columns:1fr; gap:16px; }
  @media (min-width:760px){ .grid { grid-template-columns:1fr 1fr; } }
  .voice { border:1px solid #ececf5; border-radius:12px; padding:16px; }
  .voice h3 { margin:0 0 6px; }
  .tag { display:inline-block; font-size:12px; padding:4px 8px; border-radius:999px; background:#f1f2ff; color:#2732ff; margin-bottom:10px; }
  footer { text-align:center; color:#666; font-size:13px; margin-top:24px; }
  #winnerBlock { border-left:6px solid #3b5bff; padding-left:14px; }
  #lightning { display:none; border:2px dashed #c9ceff; background:#f6f7ff; }
  #tieNotice { font-size:14px; color:#3b5bff; margin:0 0 10px; font-weight:600; }
  ul#why { margin:8px 0 0 18px; }
</style>
</head>
<body>
<header>
  <h1>Find Your ChatGPT BFF</h1>
  <p>Answer like you’re speed-dating a voice. We’re matchmaking you with your ideal vibe.</p>
</header>

<div class="wrap">
  <form id="quiz" class="card">
    <!-- Q1 -->
    <div class="q">1) My profile tagline says…</div>
    <div class="opts">
      <label><input type="radio" name="q1" value="Juniper">“Certified chaos. Will bring snacks and plot twists.”</label>
      <label><input type="radio" name="q1" value="Ember">“Sarcasm with a soft heart; semicolons welcome.”</label>
      <label><input type="radio" name="q1" value="Spruce">“Neat lists, zero fluff. Swipe right for structure.”</label>
      <label><input type="radio" name="q1" value="Cove">“Calm seas, deep talks, fewer tabs open.”</label>
      <label><input type="radio" name="q1" value="Arbor">“Blunt but devoted: here’s the plan.”</label>
      <label><input type="radio" name="q1" value="Verse">“Main-character energy. Soundtrack included.”</label>
    </div>
    <hr>

    <!-- Q2 -->
    <div class="q">2) Ideal first-date energy:</div>
    <div class="opts">
      <label><input type="radio" name="q2" value="Maple">Cozy bookstore + cocoa, then sincere compliments</label>
      <label><input type="radio" name="q2" value="Spruce">Thirty-minute plan, done by 9, shared calendar invite</label>
      <label><input type="radio" name="q2" value="Breeze">Low-stakes park stroll, no agenda, pet every dog</label>
      <label><input type="radio" name="q2" value="Sol">Mini-golf with Olympic-level trash talk</label>
      <label><input type="radio" name="q2" value="Ember">Museum date + spicy commentary</label>
      <label><input type="radio" name="q2" value="Juniper">Immediate karaoke, no warm-up, send it</label>
    </div>
    <hr>

    <!-- Q3 -->
    <div class="q">3) Texting style you’ll vibe with:</div>
    <div class="opts">
      <label><input type="radio" name="q3" value="Cove">Thoughtful paragraphs, zero chaos</label>
      <label><input type="radio" name="q3" value="Arbor">Bullet points + owners + due dates</label>
      <label><input type="radio" name="q3" value="Verse">Voice notes with theatrical pauses</label>
      <label><input type="radio" name="q3" value="Maple">Gentle check-ins and wholesome reactions</label>
      <label><input type="radio" name="q3" value="Spruce">TL;DR first, link receipts second</label>
      <label><input type="radio" name="q3" value="Juniper">Memes at 2:07 a.m. and they’re actually funny</label>
    </div>
    <hr>

    <!-- Q4 -->
    <div class="q">4) When I’m stuck, my BFF should…</div>
    <div class="opts">
      <label><input type="radio" name="q4" value="Arbor">Call me out kindly, hand me a plan</label>
      <label><input type="radio" name="q4" value="Sol">Hype me up, set a timer, we move</label>
      <label><input type="radio" name="q4" value="Ember">Socratic-question me until the idea snaps into place</label>
      <label><input type="radio" name="q4" value="Breeze">Lower the pressure, remind me to breathe</label>
      <label><input type="radio" name="q4" value="Juniper">Shake me loose with wild prompts and weird angles</label>
      <label><input type="radio" name="q4" value="Cove">Slow it down: one clean step at a time</label>
    </div>
    <hr>

    <!-- Q5 -->
    <div class="q">5) Turn-ons (in a voice):</div>
    <div class="opts">
      <label><input type="radio" name="q5" value="Breeze">Warm & soft — blanket in voice form</label>
      <label><input type="radio" name="q5" value="Cove">Calm & mellow — unflappable</label>
      <label><input type="radio" name="q5" value="Spruce">Crisp & precise — surgical clarity</label>
      <label><input type="radio" name="q5" value="Verse">Smooth & cinematic — storyteller vibes</label>
      <label><input type="radio" name="q5" value="Sol">Bright & energetic — sunshine in sneakers</label>
      <label><input type="radio" name="q5" value="Maple">Cozy & teacherly — patient, warm cadence</label>
    </div>
    <hr>

    <!-- Q6 -->
    <div class="q">6) Love language of help?</div>
    <div class="opts">
      <label><input type="radio" name="q6" value="Spruce">Template pack I can reuse forever</label>
      <label><input type="radio" name="q6" value="Ember">Paste-ready narrative with tasteful spice</label>
      <label><input type="radio" name="q6" value="Verse">Lines so polished they sound like a trailer VO</label>
      <label><input type="radio" name="q6" value="Maple">Gentle step-by-step with encouragement</label>
      <label><input type="radio" name="q6" value="Breeze">Simple notes + kind nudge to keep going</label>
      <label><input type="radio" name="q6" value="Sol">Quick wins + a 7-day mini plan</label>
    </div>

    <!-- SECRET: Q7 Lightning Round (appears only on tie) -->
    <div id="lightning" class="card" style="display:none;margin-top:18px;">
      <div id="tieNotice">Tie detected! Lightning Round: choose your destiny ⚡️</div>
      <div class="q">7) We matched! On our first hang, I want you to…</div>
      <div class="opts">
        <label><input type="radio" name="q7" value="Maple">Guard the snack table with me like it’s sacred</label>
        <label><input type="radio" name="q7" value="Verse">Tell a story no one can stop listening to</label>
        <label><input type="radio" name="q7" value="Juniper">Adopt the dog, meet three strangers, make plans</label>
        <label><input type="radio" name="q7" value="Arbor">Fix the wobbly table and color-code the cups</label>
        <label><input type="radio" name="q7" value="Cove">Order mocktails and compliment the glassware</label>
        <label><input type="radio" name="q7" value="Spruce">Start a game and actually read the rules</label>
        <label><input type="radio" name="q7" value="Ember">Quote a movie and rate the hors d’oeuvres</label>
        <label><input type="radio" name="q7" value="Sol">Drop a pun: five groans, one standing ovation</label>
        <label><input type="radio" name="q7" value="Breeze">Wave at strangers like old friends; pet check-ins</label>
      </div>
    </div>

    <div class="actions">
      <button id="seeResults" type="button">See my result</button>
      <button id="reset" type="reset">Reset</button>
    </div>
  </form>

  <div id="results" class="card result">
    <h2>Your ChatGPT BFF Match:</h2>
    <div id="topVoice" class="tag"></div>
    <div id="winnerBlock">
      <p id="blurb" style="margin-top:6px"></p>
      <h4 style="margin:12px 0 6px;">Why you two match:</h4>
      <ul id="why"></ul>
    </div>

    <h3 style="margin-top:22px;">How your answers matched</h3>
    <div class="grid" id="allVoices"></div>

    <div class="actions">
      <button id="copy" type="button" title="Copy result">Copy result</button>
    </div>
  </div>

  <footer>PS: If you get “Verse,” karaoke is now mandatory.</footer>
</div>

<script>
/* Long, funny descriptions (unchanged) */
const DESCRIPTIONS_LONG = {
  "Arbor": "You have eldest-sibling energy. You’re reliable, grounded, and somehow know how to fold a fitted sheet. People ask you to “just glance at this résumé” or “proofread my wedding vows.” Secretly dreams of running away to a cabin but would still alphabetize the spice rack there.",
  "Cove": "You’d definitely survive in a seaside cottage with questionable Wi-Fi. Your vibe is “calm therapist who also surfs.” You journal, you meditate, you text back with proper punctuation. Probably owns at least one linen shirt and has strong opinions about oat milk brands.",
  "Spruce": "If you picked Spruce, you’re the person in the friend group who insists “guys, let’s just split the bill evenly.” You own a reusable water bottle plastered with stickers that are lowkey your personality. When you clap, it’s loud enough to startle pets.",
  "Maple": "Warm, kind, and a little nostalgic. If you were a TV trope, you’d be the wise best friend who gives heartfelt advice over pancakes. You cry at Pixar movies but also send the best memes. People trust you with their secrets and their sourdough starter.",
  "Breeze": "You are the human equivalent of a lavender latte/cottagecore playlist. Friends describe you as “chill” and “wholesome,” but your search history reveals an alarming number of conspiracy rabbit holes. Probably owns too many blankets and is fine with it.",
  "Juniper": "You’re the friend who suggests “just one drink” and somehow it’s 3 a.m. and you’ve adopted a raccoon. Chaotic good energy. Will absolutely send you a TikTok that’s “so you” while you’re still watching the one they just sent.",
  "Ember": "You write emails with semicolons on purpose. Your playlists have titles like “Melancholy in C Minor.” People come to you for advice because you give main-character monologue vibes. Secretly you practice Oscar speeches in the shower (and schedule historical walking tours).",
  "Sol": "You talk with your hands even when no one is watching. You say things like “let’s circle back” unironically. You believe you’d crush it on Survivor even though you once cried when your DoorDash was late. Your aura is dad jokes and sneakers with arch support.",
  "Verse": "You’re here for ✨the drama✨. You love a good entrance, even into a Zoom call. If someone in the group chat says “spill,” you’re already typing a 10-part saga. Definitely the person who turns karaoke into a concert. Will monologue about their favorite TV show like it’s Shakespeare."
};

const DESCRIPTIONS_SHORT = {
  "Arbor": "Direct, practical, gets it done.",
  "Cove": "Calm, structured, minimal fluff.",
  "Spruce": "Concise, organized, repeatable.",
  "Maple": "Supportive, warm, patient.",
  "Breeze": "Gentle, low-pressure, kind.",
  "Juniper": "Creative, high-energy, idea-rich.",
  "Ember": "Witty, thoughtful, contextual.",
  "Sol": "Upbeat, motivating, optimistic.",
  "Verse": "Expressive, memorable, theatrical."
};

const ALL = Object.keys(DESCRIPTIONS_LONG);

/* Reasons: show snippets that map to the winner from the answers you chose */
const REASONS = {
  q1: {
    Juniper:"You wanted a snack-bringing chaos gremlin.",
    Ember:"You asked for witty brains with soft edges.",
    Spruce:"You swiped right on structure over vibes.",
    Cove:"You wanted calm seas and fewer open tabs.",
    Arbor:"You said “just give me the plan.”",
    Verse:"You requested main-character storytelling."
  },
  q2: {
    Maple:"You wanted cozy connection over spectacle.",
    Spruce:"You chose efficient plans and shared calendars.",
    Breeze:"You prefer low-stakes, high-kindness hangs.",
    Sol:"You asked for competitive sunshine.",
    Ember:"You picked smart commentary with taste.",
    Juniper:"You went straight to karaoke chaos."
  },
  q3: {
    Cove:"You like thoughtful paragraphs over chaos.",
    Arbor:"You asked for bullets, owners, and due dates.",
    Verse:"You wanted theatrical voice notes.",
    Maple:"You prefer gentle check-ins.",
    Spruce:"You like TL;DRs and receipts.",
    Juniper:"You’re cool with 2am memes (that land)."
  },
  q4: {
    Arbor:"You wanted direct accountability and a plan.",
    Sol:"You asked for pep + a timer.",
    Ember:"You wanted sharp questions to unlock ideas.",
    Breeze:"You preferred pressure-lowering calm.",
    Juniper:"You wanted playful disruption.",
    Cove:"You chose slow, clean steps."
  },
  q5: {
    Breeze:"You prefer a warm, soft timbre.",
    Cove:"You like calm, mellow steadiness.",
    Spruce:"You want crisp, precise delivery.",
    Verse:"You enjoy smooth, cinematic storytelling.",
    Sol:"You wanted bright, energetic tone.",
    Maple:"You like cozy, teacherly cadence."
  },
  q6: {
    Spruce:"You asked for reusable templates.",
    Ember:"You wanted paste-ready narrative.",
    Verse:"You wanted quotable polish.",
    Maple:"You asked for gentle step-by-step.",
    Breeze:"You value simple notes + kind nudges.",
    Sol:"You wanted quick wins + a mini plan."
  },
  q7: {
    Maple:"Snack-table solidarity is your love language.",
    Verse:"You gravitate to big storyteller energy.",
    Juniper:"You like bold social energy and new friends.",
    Arbor:"You appreciate practical order and fixes.",
    Cove:"You prefer understated, considerate presence.",
    Spruce:"You like structure and shared rules.",
    Ember:"You enjoy clever references and taste-checks.",
    Sol:"You appreciate puns and morale boosts.",
    Breeze:"You like friendly warmth and pet check-ins."
  }
};

/* BALANCE NOTE:
   Across Q1–Q6, each of the 9 voices appears exactly 4× (6×6=36 slots → 9×4=36). */

function calcBaseScores() {
  const scores = Object.fromEntries(ALL.map(v => [v, 0]));
  const chosen = {};
  const form = document.getElementById('quiz');
  const fields = ['q1','q2','q3','q4','q5','q6'];
  for (const name of fields) {
    const picked = form.querySelector(`input[name="${name}"]:checked`);
    if (picked) {
      scores[picked.value] += 1;
      chosen[name] = picked.value;
    }
  }
  return {scores, chosen};
}

function topTies(scores) {
  let max = -Infinity;
  for (const v of ALL) max = Math.max(max, scores[v]);
  const leaders = ALL.filter(v => scores[v] === max);
  return { leaders, max };
}

function renderAll(scores) {
  const wrap = document.getElementById('allVoices');
  wrap.innerHTML = '';
  const entries = ALL
    .map(v => ({ v, n: scores[v] }))
    .sort((a,b) => b.n - a.n || a.v.localeCompare(b.v));
  for (const {v, n} of entries) {
    const div = document.createElement('div');
    div.className = 'voice';
    div.innerHTML = `<h3>${v} <span style="opacity:.6;font-weight:400">(${n.toFixed(2)})</span></h3>
      <p>${DESCRIPTIONS_SHORT[v]}</p>`;
    wrap.appendChild(div);
  }
}

function reasonsForWinner(winner, chosen) {
  const ul = document.getElementById('why');
  ul.innerHTML = '';
  let added = 0;
  for (const q of Object.keys(chosen)) {
    const v = chosen[q];
    if (v === winner && REASONS[q] && REASONS[q][v]) {
      const li = document.createElement('li');
      li.textContent = REASONS[q][v];
      ul.appendChild(li);
      added++;
    }
  }
  if (added === 0) {
    const li = document.createElement('li');
    li.textContent = "Your tie-breaker choice sealed the match.";
    ul.appendChild(li);
  }
}

let tieMode = false;
let cachedBase = null;

function showResults(finalScores, finalChosen) {
  const { leaders } = topTies(finalScores);
  leaders.sort(); // deterministic fallback
  const winner = leaders[0];

  document.getElementById('topVoice').textContent = winner;
  document.getElementById('blurb').textContent = DESCRIPTIONS_LONG[winner];
  reasonsForWinner(winner, finalChosen);
  renderAll(finalScores);
  document.getElementById('results').classList.add('show');
  document.getElementById('results').scrollIntoView({behavior:'smooth'});
}

document.getElementById('seeResults').addEventListener('click', () => {
  const btn = document.getElementById('seeResults');

  if (!tieMode) {
    const {scores, chosen} = calcBaseScores();
    cachedBase = {scores, chosen};
    const { leaders } = topTies(scores);

    if (leaders.length > 1) {
      tieMode = true;
      document.getElementById('lightning').style.display = 'block';
      btn.textContent = 'Finish (Break the tie)';
      document.getElementById('lightning').scrollIntoView({behavior:'smooth'});
      return;
    } else {
      showResults(scores, chosen);
      return;
    }
  } else {
    const choice = document.querySelector('input[name="q7"]:checked');
    if (!choice) {
      alert('Pick one Lightning Round answer to break the tie!');
      return;
    }
    const finalScores = {...cachedBase.scores};
    const finalChosen = {...cachedBase.chosen, q7: choice.value};
    finalScores[choice.value] += 0.5; // tiny nudge to guarantee a winner
    showResults(finalScores, finalChosen);
  }
});

document.getElementById('reset').addEventListener('click', () => {
  document.getElementById('results').classList.remove('show');
  document.getElementById('lightning').style.display = 'none';
  document.getElementById('seeResults').textContent = 'See my result';
  tieMode = false;
  cachedBase = null;
  const q7 = document.querySelector('input[name="q7"]:checked');
  if (q7) q7.checked = false;
  document.getElementById('why').innerHTML = '';
});

document.getElementById('copy').addEventListener('click', async () => {
  const voice = document.getElementById('topVoice').textContent || 'A Mystery';
  const paragraph = DESCRIPTIONS_LONG[voice] || '';
  const txt = `My ChatGPT BFF is: ${voice} — ${paragraph}`;
  try {
    await navigator.clipboard.writeText(txt);
    alert('Result copied! Paste anywhere.');
  } catch {
    alert('Copy failed—select the text manually in the results.');
  }
});
</script>
</body>
</html>
